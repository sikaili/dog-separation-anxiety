<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>test1</title>
  <!-- <script src="libraries/p5.js" type="text/javascript"></script>
  <script src="libraries/p5.dom.js" type="text/javascript"></script>
  <script src="libraries/p5.sound.js" type="text/javascript"></script> -->
  <script src="https://unpkg.com/ml5@0.3.0/dist/ml5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.dom.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.8.0/addons/p5.sound.min.js"></script>
  <script src='libraries/CCapture.js'></script>
  <script src="libraries/webm-writer-0.2.0.js"></script>
  <script src='libraries/download.js'></script>


  <style>
    body {
      padding: 0;
      margin: 0;
    }

    canvas {
      vertical-align: top;
      /* position: fixed; */
      overflow: hidden
    }
  </style>
</head>

<body>
  <div id="sketch-holder"></div>
  <script src="src/sketch.js" type="text/javascript"></script>
  <script src="src/settings.js" type="text/javascript"></script>
  <button id="submit" onclick="(() => {
    if ('geolocation' in navigator) {
      console.log('ok');
      navigator.geolocation.getCurrentPosition(async a => {
        const data = {
          lat: a.coords.latitude,
          long: a.coords.longitude
        };
        console.log(data);
        const options = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        }
        const response = await fetch('/api', options);
        const json = await response.json();
        console.log(json);
      })
    } else {
      console.log('Geolocation not available');
    }
  })();">Submit</button>
</body>

</html>